<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AppPokemon</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
    fetchData()
    })
    


const fetchData = async () => {
    try {
        
        //console.log()
        
        const res = await fetch(`https://pokeapi.co/api/v2/pokemon/1`)
        const data = await res.json()
        
        console.log(data)
        /*var pokemonDetalle=new Array<Pokemon.DatosPokemon>();
        data.forEach(element => {
            
        });*/
        const pokemonInicio={
            name:data.name,
            imagen:data.sprites.back_default,
            peso:data.weight,
            altura:data.height
        }
        console.log(pokemonInicio)

        /*const pokemon = {
            img: `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${data.id}.png`,
            imgJuego: data.sprites.front_default,
            imgCvg: data.sprites.other.dream_world.front_default,
            nombre: data.name,
            experiencia: data.base_experience,
            hp: data.stats[0].base_stat,
            ataque: data.stats[1].base_stat,
            defensa: data.stats[2].base_stat,
            especial: data.stats[3].base_stat,
        }

        console.log(pokemon);*/
        pintarTabla(pokemonInicio);
    
    } catch (error) {
        console.log(error)
    }
} 

const verDetalle=detalle=>{
    console.log("accion");
}

const pintarTabla = pokemon => {
    const flex = document.querySelector('.flex')
    const template = document.getElementById('card').content
    const clone = template.cloneNode(true)
    const fragment = document.createDocumentFragment()

    //clone.querySelector('.card-body-img').setAttribute('src', pokemon.imgCvg)
    // clone.querySelector('.card-body-img').setAttribute('src', pokemon.imgJuego)
    clone.querySelector('#name_pokemon').innerHTML = `<td>${pokemon.name}</td>
    <td><button id="verDetalle "type="button" class="btn btn-primary" > Ver Detalles</button></td>`
    clone.querySelector('#fichaPokemon').innerHTML = `<h1>Detalles del Pokemon:</h1>
                                <img src=${pokemon.imagen}>
                                <h3>Nombre: ${pokemon.name}</h3>
                                <h3>Peso: ${pokemon.peso}</h3>
                                <h3>Altura: ${pokemon.altura}</h3>`

    /*clone.querySelector('.card-body-text').textContent = pokemon.experiencia + ' exp'
    clone.querySelectorAll('.card-footer-social h3')[0].textContent = pokemon.ataque + 'K'
    clone.querySelectorAll('.card-footer-social h3')[1].textContent = pokemon.especial + 'K'
    clone.querySelectorAll('.card-footer-social h3')[2].textContent = pokemon.defensa + 'K'*/

    fragment.appendChild(clone)
    flex.appendChild(fragment)
    $("#verDetalle").click(function(e){
    console.log("prueba");
    })
}




    </script>
</head>
<body>
    <main class="flex"></main>
    <template id="card">
    <div class="d-flex flex-column bd-highlight mb-3">
        <div id="titulo" class="p-2 bd-highlight" style="background-color: #AAB7B8;">
            <h1 >La pokedex Xanva</h1>
        </div>
        
                <div class="p-2 bd-highlight">
                    <div class="d-flex bd-highlight">
                        <div class="p-2 bd-highlight" style="border-right: solid;">
                            <div>
                                <h2>Lista de pokemons:<h2>
                            </div>
                            <div class="d-flex bd-highlight">
                                    <table class="table table-bordered border-secundary">
                                        <thead>
                                        <tr>
                                            <th scope="col" style=" color: #5DADE2 ">Nombre</th>
                                            <th scope="col" style=" color: #5DADE2 ">Acciones</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr id="name_pokemon">
                                            <td>1</td>
                                            <td>
                                                <button type="button" class="btn btn-primary" > Detalles</button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                            </div>

                        </div>
                        <div class="p-2 bd-highlight">
                            <div id="fichaPokemon">
                                <h1>Detalles del Pokemon:</h1>
                                <img src="">
                                <h3>Nombre:</h3>
                                <h3>Peso:</h3>
                                <h3>Altura:</h3>
                            </div>
                        </div>
                    </div>
                </div>
        </template>
    </div>
</body>
</html>